<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="FileSaver.js"></script>
<script src="https://cdn.rawgit.com/eligrey/canvas-toBlob.js/f1a01896135ab378aa5c0118eadd81da55e698d8/canvas-toBlob.js"></script>

<svg width=800 height=1080></svg>
<script>

	var height = 960;
	var width = 600;
	var barWidth = 50;
	var barCount = 10;
	var fract = ((Math.random() * 5) + 3) / barCount;
	
	var pairHeight = (Math.random() * 400) + barWidth;
	var svg = d3.select("svg");
	
	var pairs = [];
	while(pairs.length < 2) {
		var r = Math.floor(Math.random() * barCount);
		if(pairs.indexOf(r) === -1) pairs.push(r);
	}
	document.title = (pairs[0].toString() + ", " + pairs[1].toString() + ", percent: " + fract.toString());
	
    for (let i = 0; i < barCount; i++) {
		var pos = (Math.random() * 400) + barWidth;
		if(i == pairs[0]) {
			svg.append('rect')
				.attr('x', (barCount + barWidth) * i)
				.attr('y', height - pairHeight)
				.attr('width', barWidth)
				.attr('height', pairHeight)
				.attr('fill', 'black');
			svg.append('circle')
				.attr('cx', ((barCount + barWidth) * i) + (barWidth / 2))
				.attr('cy', (height - pairHeight) + (pairHeight / 2))
				.attr('r', barWidth / 8)
				.attr('fill', 'yellow');
		}
		if(i == pairs[1]) {
			svg.append('rect')
				.attr('x', (barCount + barWidth) * i)
				.attr('y', height - (pairHeight * fract))
				.attr('width', barWidth)
				.attr('height', (pairHeight * fract))
				.attr('fill', 'black');
			svg.append('circle')
				.attr('cx', ((barCount + barWidth) * i) + (barWidth / 2))
				.attr('cy', height - (pairHeight * fract) / 2)
				.attr('r', barWidth / 8)
				.attr('fill', 'yellow');
		}
		else if (i != pairs[0] && i != pairs[1]){
			svg.append('rect')
				.attr('x', (barCount + barWidth) * i)
				.attr('y', height - pos)
				.attr('width', barWidth)
				.attr('height', pos)
				.attr('fill', 'black');
		}
	}
</script>
