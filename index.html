<script src="https://d3js.org/d3.v4.min.js"></script>


<style>
</style>

<body>
  <h1> Experiment </h1>
</body>

<script>
  
  width=500;
  height=500;
  var svg = d3.select("body")
  .append("svg")
  .attr("width", width)
  .attr("height", height);

  function createBubbleChart(nums, mark1, mark2, ratio){
    const n = 10;
    var cx = [];
    var sum=nums[0];
    for(var i=0; i < nums.length; i++){
      sum = sum+n*((nums[i] / Math.PI)**0.5);
      cx.push(sum);
      sum = sum+n*((nums[i] / Math.PI)**0.5)+10;
    }
    
    var scaleX = d3.scaleLinear()
    .domain([0,350])
    .range([0,width-100]);

    var x = d3.axisBottom()
    .scale(scaleX);

    var scaleY = d3.scaleLinear()
    .domain(0, nums.length*20)
    .range(height-100, 40);

    var y = d3.axisLeft()
    .scale(scaleY);

    svg.append("g")
    .attr("transform", "translate(40," + (height-100)+")");

    svg.append("g")
    .attr("transform", "translate(40,0)");

    var count = 0;
    svg.append("g")
    .selectAll("dot")
    .data(nums)
    .enter()
    .append("circle")
    .attr("cx", function(){ 
      var c = cx[count];
      count++;
      return c;
    })
    .attr("cy", 150)
    .attr("r", function(d){ return  n*((d / Math.PI)**0.5);})
    .style("fill", "white")
    .style("stroke", "black");
    
    svg.append("circle")
    .attr("cx", function(){
      return cx[mark1];
    })
    .attr("cy", 150)
    .attr("r", 3);

    svg.append("circle")
    .attr("cx", function(){
      return cx[mark2]; 
    })
    .attr("cy", 150)
    .attr("r", 3);

  }

  //createBubbleChart([37.55174893355209, 26.7242869088752, 7.279825722381671, 3.1068271579164195, 25.337311277274612],3,0,0.08273455288098452)

  function createBarChart(nums, mark1, mark2, ratio){
    
    var xVals = [];
    var sum = 40;
    var rectWidth = 15;
    const m = 5;
    var maxNum=0;
    for(var i=0; i < nums.length; i++){
      sum+=rectWidth;
      xVals.push(sum);
      sum+=rectWidth;
      if(nums[i]>maxNum){
        maxNum = nums[i]
      }
    }

    var scaleX = d3.scaleLinear()
    .domain([0, width])
    .range([0, 35*nums.length]);

    var x = d3.axisBottom()
    .scale(scaleX);

    var scaleY = d3.scaleLinear()
    .domain([0,maxNum*m])
    .range([height-100, 40]);

    var y = d3.axisLeft()
    .scale(scaleY);

    svg.append("g")
    .attr("transform", "translate(40," + (height-100)+")")
    .call(x.ticks(0));

    svg.append("g")
    .attr("transform", "translate(40,0)")
    .call(y.ticks(0));

    var count=0;
    console.log(nums[0]);
    svg.selectAll("mybar")
    .data(nums)
    .enter()
    .append("rect")
    .attr("x", function(d){
      n = xVals[count];
      count++;
      return n;
    })
    .attr("y", function(d){
      return scaleY(d*m);
    })
    .attr("width", rectWidth)
    .attr("height", function(d){
      return height-100-scaleY(d*m);
    })
    .style("fill", "white")
    .style("stroke", "black");

    svg.append("circle")
    .attr("cx", function(){
      return xVals[mark1]+7.5;
    })
    .attr("cy", height-105)
    .attr("r", 3);

    svg.append("circle")
    .attr("cx", function(){
      return xVals[mark2]+7.5; 
    })
    .attr("cy", height-105)
    .attr("r", 3);
  }

  createBarChart([37.55174893355209, 26.7242869088752, 7.279825722381671, 3.1068271579164195, 25.337311277274612],3,0,0.08273455288098452);
</script>
