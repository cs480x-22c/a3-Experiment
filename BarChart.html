<!DOCTYPE html>
<html lang ="en">
<head>
	<script src="https://d3js.org/d3.v7.min.js" charset="utf-8"  crossorigin="anonymous"></script>
	<meta name="viewport" content="width=device-width" charset="utf-8">

	<script type="text/javascript" src="app.js"></script>


	<style type="text/css">
		#chartholder {
			display: block;
			height: 400px;
			width: 600px;
			margin-left: auto;
 		    margin-right: auto;
		}
		.bar {
			display: inline-block;
			width: 50px;
			height: 10px; 
			margin-right: 2px;
		}

		.container {
       		text-align: center;
			display: flex;
  			justify-content: center;
			font-family: 'Quicksand', sans-serif;
		}
		.input {
    		display: inline-block;
		}
		.btn {
			margin-top: 10px;
			display: flex;
  			justify-content: center;
		}

	</style>
	<link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet" charset="utf-8" crossorigin="anonymous">
</head>
<title>BarChart</title>  

<body onload="start()">
	<div id="chartholder" ></div>
	<p class="container">Please input how much smaller you think the indicated bar is from the larger one</p><br>
	<form id="form" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSem31Rwenl8ys0SmFXxWK8wpimxpvQew6HCI0Dc5MEkXb3uMg/formResponse" target="hidden_iframe" onsubmit="submitted=true;">
		<div class="container">
		<input type="text" name="entry.1400593830" id="userInput" class="input" title="input"></input>
			<p class="input">   %</p>		
		<input hidden type="text" name="entry.1119470707" id="per" class="per" title="per"></input>
		<input hidden type="text" name="entry.560768253" value="barchart" id="chart" class="bc" title="bc"></input>
		</div>

		<div class="btn">
			<button type="submit" >Submit</button>
			<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="if(submitted)  {window.location='/a3-Experiment/BarChart.html';}"></iframe>
			<a href="/a3-Experiment/PieGraph.html">Next</a>	
		</div>
	</form>
</body>
</html>

<script>

console.log(d3);
// Random Dataset
var data = d3.range(10).map(function() {
    return Math.random(100) ;
});

var point1 = data[Math.floor(Math.random(10) * 10)];
var point2 = data[Math.floor((Math.random(10)) * 10)];

while (point1 == point2){
    point2 = data[Math.floor((Math.random(10)) * 10)]
}

console.log(data);
console.log(point1);
console.log(point2);

function start() {
	generateGraph();
	calcInput();

}
function generateGraph(){
    // Display data
    var svg = d3.select('#chartholder').selectAll('div')
        .data(data)
        .enter()
        .append('div')
        .attr('class', 'bar')
	.attr("style", "outline: solid black;")		
        .style('height', function (d) { return d * 400 + 'px';})
        .style('background-color', function(d){ if(d == point1 || d == point2){ return "grey"}return "white";})
	.append("text")
        .attr("transform", function(d) { 
        return "translate(" d * 200 + "px")"; 
  	  })
        .text(function(d) { if(d == point1 || d == point2) {return "Â·" } return "";});

	}

function calcInput() {
    var input = document.getElementById("userInput").value;
    var percent = 100 - (Math.min(point1, point2) / Math.max(point1, point2) * 100);
    document.getElementById("per").setAttribute("value", percent);
     
}
 var results = [input, percent, "barchart"]    
 console.log(results);

</script>
