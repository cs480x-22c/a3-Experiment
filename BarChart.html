<!DOCTYPE html>
<html lang ="en">
<head>
	<script src="https://d3js.org/d3.v7.min.js" charset="utf-8"  crossorigin="anonymous"></script>
	<meta name="viewport" content="width=device-width" charset="utf-8">

	<script type="text/javascript" src="app.js"></script>


	<style type="text/css">
		#chartholder {
			display: block;
			height: 400px;
			width: 600px;
			margin-left: auto;
 		    margin-right: auto;
		}
		.bar {
			display: inline-block;
			width: 50px;
			height: 10px; 
			margin-right: 2px;
		}

		.container {
       		text-align: center;
			display: flex;
  			justify-content: center;
			font-family: 'Quicksand', sans-serif;
		}
		.input {
    		display: inline-block;
		}
		.btn {
			margin-top: 10px;
			display: flex;
  			justify-content: center;
		}

	</style>
	<link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet" charset="utf-8" crossorigin="anonymous">
</head>
<title>BarChart</title>  

<body onload="generateGraph()">
	<div id="chartholder" ></div>
	<p class="container">Please input how much smaller you think the indicated bar is from the larger one</p><br>
	<form id="form"> 
		<div class="container">
		<input type="text" name="inputs" id="userInput" class="input" title="input"></input>
			<p class="input">   %</p>
		</div>

		<div class="btn">
			<button type="submit" onclick="calcInput()">Submit</button>
			<button type="button" onclick="window.location.href='/a3-Experiment/PieGraph.html'">Next</button>	

			<label hidden type="text" value="barchart" id="chart" class="bc" title="bc"></label>
		</div>
	</form>
</body>
</html>

<script>

console.log(d3);
// Random Dataset
var data = d3.range(10).map(function() {
    return Math.random(100) ;
});

var point1 = data[Math.floor(Math.random(10) * 10)];
var point2 = data[Math.floor((Math.random(10)) * 10)];

while (point1 == point2){
    point2 = data[Math.floor((Math.random(10)) * 10)]
}

console.log(data);
console.log(point1);
console.log(point2);


function generateGraph(){
    // Display data
    var svg = d3.select('#chartholder').selectAll('div')
        .data(data)
        .enter()
        .append('div')
        .attr('class', 'bar')
		.attr("style", "outline: solid black;")
        .style('height', function (d) { return d * 400 + 'px';})
        .style('background-color', function(d){ if(d == point1 || d == point2){ return "black"}return "white";});
}

var fs = require('fs');

function calcInput() {
    var input = document.getElementById("userInput").value;
    var percent = Math.min(point1, point2) / Math.max(point1, point2) * 100;
    console.log(percent); 
    
	var results = [input, percent, "barchart"] 

	fs.appendFile('../data.json', JSON.stringify(results), (err) => {  
      // Catch this!
      if (err) throw err;
      console.log(results)
  });
}


</script>
